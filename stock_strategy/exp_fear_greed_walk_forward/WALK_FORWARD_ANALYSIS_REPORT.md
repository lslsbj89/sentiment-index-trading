# Walk-Forward 情绪策略分析报告

**生成日期**: 2026-01-24
**分析周期**: 2016-2025 (6个滚动窗口)
**标的股票**: TSLA, AAPL, MSFT, GOOGL, AMZN, NVDA, META

---

## 一、策略概述

### 1.1 交易规则

```
买入条件: smoothed_index < buy_threshold
卖出条件: (smoothed_index > and_threshold AND price < MA50)
          OR (smoothed_index > or_threshold)
```

- `smoothed_index`: 情绪指数的平滑值（5日RMA/Wilder平滑）
- `buy_threshold`: 恐惧阈值，情绪低于此值时买入
- `and_threshold`: 贪婪阈值（需配合MA50跌破）
- `or_threshold`: 极度贪婪阈值，直接卖出

### 1.2 Walk-Forward 验证方法

```
窗口结构: 4年训练 + 1年测试

W2020: Train 2016-2019 → Test 2020
W2021: Train 2017-2020 → Test 2021
W2022: Train 2018-2021 → Test 2022
W2023: Train 2019-2022 → Test 2023
W2024: Train 2020-2023 → Test 2024
W2025: Train 2021-2024 → Test 2025
```

**关键特性**:
- **持仓延续**: 训练期末持仓可延续至测试期
- **阈值放宽**: 测试期阈值 = 训练期阈值 × 0.8（更容易触发）
- **复利计算**: 累计收益采用复利方式

---

## 二、2026年推荐参数

基于2021-2024训练、2025测试的最优参数：

| 股票 | Buy阈值 | AND阈值 | OR阈值 | 2025收益 | 训练收益 | 泛化比 |
|------|--------|--------|-------|---------|---------|-------|
| TSLA | <-15 | >25 | >45 | +72.0% | +257.5% | 28.0% |
| NVDA | <5 | >25 | >50 | +37.1% | +444.6% | 8.3% |
| GOOGL | <-10 | >20 | >25 | +18.7% | +55.8% | 33.5% |
| AAPL | <0 | >5 | >35 | +21.2% | +102.3% | 20.7% |
| MSFT | <5 | >10 | >25 | +11.0% | +73.0% | 15.1% |
| META | <-30 | >25 | >65 | +9.8% | +445.3% | 2.2% |
| AMZN | <-20 | >20 | >35 | +4.3% | +80.9% | 5.3% |

**泛化比** = 测试期收益 / 训练期收益，反映参数在未知数据上的表现

---

## 三、历史表现统计 (2020-2025)

### 3.1 各股票累计收益

| 排名 | 股票 | 累计收益 | 胜率 | 平均收益 | 最大回撤 | 稳定性(StdDev) |
|-----|------|---------|------|---------|---------|---------------|
| 1 | NVDA | +290.1% | 83% | +38.1% | -50.1% | 54.9 |
| 2 | AAPL | +228.3% | 83% | +24.9% | -26.6% | 24.4 |
| 3 | TSLA | +197.9% | 50% | +27.2% | -34.6% | 40.7 |
| 4 | MSFT | +187.9% | 83% | +22.3% | -24.6% | 25.6 |
| 5 | GOOGL | +161.5% | 83% | +21.4% | -34.8% | 27.6 |
| 6 | AMZN | +106.1% | 83% | +20.1% | -46.1% | 37.7 |
| 7 | META | +15.4% | 67% | +8.9% | -54.3% | 32.5 |

### 3.2 各窗口详细表现

| 窗口 | NVDA | AAPL | TSLA | MSFT | GOOGL | AMZN | META |
|------|------|------|------|------|-------|------|------|
| W2020 | +14.4% | +42.9% | +0.0% | +35.7% | +26.7% | +66.7% | +16.6% |
| W2021 | +34.2% | +33.6% | +0.0% | +50.7% | +56.0% | +3.8% | -0.6% |
| W2022 | -50.1% | -26.6% | -34.6% | -24.6% | -34.8% | -46.1% | -54.3% |
| W2023 | +134.4% | +45.9% | +68.9% | +46.3% | +27.9% | +53.5% | +49.4% |
| W2024 | +58.7% | +32.4% | +56.7% | +15.0% | +33.7% | +38.2% | +32.8% |
| W2025 | +37.1% | +21.2% | +72.0% | +11.0% | +18.7% | +4.3% | +9.8% |

**规律发现**:
- 2022年全线亏损（熊市环境策略失效）
- TSLA 2020-2021连续0%（情绪未达买入阈值）
- 持仓延续是收益主要来源（多数窗口0-2次交易）

---

## 四、策略 vs Buy&Hold

| 股票 | 策略收益 | Buy&Hold | 策略/BH比 |
|------|---------|----------|----------|
| TSLA | +197.9% | +1,134% | 17.5% |
| NVDA | +290.1% | ~+2,000% | ~15% |
| AAPL | +228.3% | ~+400% | ~57% |
| MSFT | +187.9% | ~+250% | ~75% |

**结论**: 策略在牛市中跑输Buy&Hold，但提供下行保护（2022年回撤控制）

---

## 五、风险评估

### 5.1 主要风险

| 风险类型 | 描述 | 影响程度 |
|---------|------|---------|
| **过拟合风险** | 泛化比普遍<30%，训练期收益远高于测试期 | 高 |
| **熊市风险** | 2022年全线亏损-24%至-54% | 高 |
| **低频交易** | 多数窗口0-2次交易，难以验证策略有效性 | 中 |
| **错过牛市** | TSLA 2020-2021零交易，错过主升浪 | 中 |
| **单一因子** | 仅依赖情绪指数，缺乏多因子验证 | 中 |

### 5.2 各股票风险等级

| 风险等级 | 股票 | 理由 |
|---------|------|------|
| **低** | AAPL, MSFT | 胜率83%，波动最低，泛化比适中 |
| **中** | GOOGL, NVDA | 高收益但波动大，2022回撤>30% |
| **高** | TSLA | 50%胜率，高波动，但上行空间大 |
| **高** | AMZN, META | 泛化比<10%，2022跌幅>45% |

---

## 六、资产配置建议

### 6.1 分层配置方案

```
总仓位控制: 50% (保留50%现金应对极端情况)

核心层 (40%):
├── AAPL: 20% - 最稳定，胜率高
└── MSFT: 20% - 波动低，泛化比适中

成长层 (30%):
├── NVDA: 15% - 最高累计收益
└── GOOGL: 15% - 泛化比最高(33.5%)

波动层 (15%):
└── TSLA: 15% - 高风险高回报

观望层 (10%):
├── AMZN: 5% - 泛化比仅5.3%
└── META: 5% - 泛化比仅2.2%

现金储备 (5%):
└── 应对极端恐惧时的加仓机会
```

### 6.2 操作信号

```
买入触发:
  - 情绪指数 < 股票对应Buy阈值
  - 加仓至目标配置比例

卖出触发:
  - 情绪指数 > OR阈值 → 全部卖出
  - 情绪指数 > AND阈值 且 价格 < MA50 → 全部卖出

仓位调整:
  - 单次加仓不超过目标仓位的50%
  - 分批建仓，降低择时风险
```

### 6.3 风险控制规则

| 规则 | 阈值 | 动作 |
|------|------|------|
| 单股止损 | -15% | 强制卖出该股票 |
| 组合止损 | -20% | 全部清仓 |
| 单股止盈 | +50% | 减仓50% |
| 季度复盘 | 连续2季跑输BH>20% | 调整策略 |

---

## 七、实操建议

### 7.1 适用场景

| 场景 | 推荐程度 | 说明 |
|------|---------|------|
| 主策略 | ⚠️ 不推荐 | 泛化比低，单一因子风险 |
| 辅助决策 | ✅ 推荐 | 情绪监控，择时参考 |
| 风控工具 | ✅ 推荐 | 过热减仓，恐惧加仓 |
| 仓位管理 | ✅ 推荐 | 控制整体风险敞口 |

### 7.2 与其他策略结合

```
建议组合:
├── 情绪策略 (本策略): 30%权重 - 择时信号
├── 基本面分析: 30%权重 - 选股依据
├── 技术分析: 20%权重 - 入场点位
└── 宏观经济: 20%权重 - 大方向判断

综合决策:
  - 至少2个维度给出同向信号时操作
  - 单一策略信号仅作参考
```

### 7.3 监控指标

```
每日监控:
  - 各股票情绪指数
  - 价格与MA50关系
  - 距离阈值的距离

每周复盘:
  - 策略信号回顾
  - 持仓盈亏状态
  - 与Buy&Hold对比

每月评估:
  - 累计收益曲线
  - 最大回撤
  - 是否需要调整参数
```

---

## 八、结论

### 8.1 策略评价

| 维度 | 评分 | 说明 |
|------|------|------|
| 收益能力 | ⭐⭐⭐ | 6年累计+15%~+290%，因股票而异 |
| 风险控制 | ⭐⭐ | 2022年回撤较大，需外部止损 |
| 泛化能力 | ⭐⭐ | 泛化比普遍<30% |
| 可操作性 | ⭐⭐⭐ | 规则明确，信号清晰 |
| 稳定性 | ⭐⭐⭐ | AAPL/MSFT胜率83%，较稳定 |

### 8.2 最终建议

1. **不作为唯一操作依据**，与其他分析方法结合使用
2. **控制总仓位在50%以下**，保留现金应对极端情况
3. **核心配置AAPL/MSFT**，稳定性最高
4. **NVDA/GOOGL作为成长配置**，泛化能力较好
5. **TSLA高风险高回报**，仓位控制在15%以内
6. **AMZN/META观望为主**，泛化比过低
7. **设置严格止损**，策略本身无内置止损机制
8. **季度复盘**，持续跑输则考虑调整

---

## 附录

### A. 文件清单

```
exp_fear_greed_walk_forward/
├── walk_forward_batch.py          # 批量测试脚本
├── walk_forward_analysis.py       # 详细分析脚本
├── cross_validation_params.py     # 交叉验证脚本
├── analysis_20260124_*/           # 可视化图表
│   ├── {SYMBOL}_W{YEAR}_analysis.png
│   ├── analysis_summary.csv
│   ├── trades_detail.csv
│   └── analysis_report.txt
└── WALK_FORWARD_ANALYSIS_REPORT.md  # 本报告
```

### B. 参数说明

| 参数 | 范围 | 说明 |
|------|------|------|
| buy_threshold | -30 ~ +5 | 越负越严格，需要更深恐惧 |
| and_threshold | 5 ~ 25 | 贪婪阈值，需配合MA50 |
| or_threshold | 25 ~ 65 | 极度贪婪，直接卖出 |
| 阈值放宽因子 | 0.8 | 测试期阈值更宽松 |
| 持仓比例 | 80% | 单次买入资金比例 |

### C. 数据来源

- **情绪数据**: fear_greed_index 表 (PostgreSQL)
- **价格数据**: prices 表 (OHLCV)
- **时间范围**: 2016-01-01 至 2025-12-31

---

*报告生成: Claude Code*
*策略类型: 情绪因子择时策略*
*验证方法: Walk-Forward 滚动窗口验证*
